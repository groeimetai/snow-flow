---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getLangFromUrl, useTranslations, type Lang } from '../../i18n/utils';

export function getStaticPaths() {
  return [
    { params: { lang: 'en' } },
    { params: { lang: 'nl' } }
  ];
}

const lang = getLangFromUrl(Astro.url) as Lang;
const t = useTranslations(lang);

const title = t('meta.home.title');
const description = t('meta.home.description');
---

<BaseLayout title={title} description={description}>
    <!-- Background Effects -->
    <div class="bg-grid"></div>
    <div class="bg-gradient"></div>
    <div class="bg-noise"></div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-glow"></div>
        <div class="container">
            <div class="hero-content">
                <div class="hero-badge">
                    <span class="pulse"></span>
                    Open Source Alternative to Build Agent
                </div>

                <h1 class="hero-title">
                    <span class="small">Break Free From Vendor Lock-in</span>
                    <span class="gradient">YOUR AI.</span><br>
                    YOUR MODELS.<br>
                    YOUR RULES.
                </h1>

                <p class="hero-subtitle">
                    Stop paying for locked-down AI. Snow-Flow lets you use <strong>your approved LLMs</strong> (Claude, GPT, DeepSeek, local models) to build ServiceNow solutions. <strong>Built by developers, for developers.</strong>
                </p>

                <div class="hero-ctas">
                    <a href="https://github.com/groeimetai/snow-flow" class="btn btn-primary">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>
                        Star on GitHub
                    </a>
                    <a href="https://portal.snow-flow.dev" class="btn btn-secondary">
                        Try Enterprise Free
                    </a>
                </div>

                <div class="hero-stats">
                    <div class="stat">
                        <div class="stat-value">410+</div>
                        <div class="stat-label">{t('hero.tools')}</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">75+</div>
                        <div class="stat-label">{t('hero.providers')}</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">100%</div>
                        <div class="stat-label">{t('hero.openSource')}</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value">0</div>
                        <div class="stat-label">{t('hero.vendorLockIn')}</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Scroll Indicator -->
        <a href="#why" class="hero-scroll-indicator" aria-label="Scroll to content">
            <span>{t('hero.scroll')}</span>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 5v14M19 12l-7 7-7-7"/>
            </svg>
        </a>
    </section>

    <!-- Developer Prominence Section -->
    <section class="dev-prominence-section">
        <div class="container">
            <div class="section-header">
                <span class="section-label">{t('devProminence.label')}</span>
                <h2 class="section-title">{t('devProminence.title')}</h2>
            </div>

            <div class="user-story-card">
                <div class="user-story-header">
                    <span class="user-story-type">
                        <svg viewBox="0 0 16 16" fill="currentColor">
                            <path d="M8 1.5a6.5 6.5 0 100 13 6.5 6.5 0 000-13zM0 8a8 8 0 1116 0A8 8 0 010 8z"/>
                            <path d="M8 4a.75.75 0 01.75.75v2.5h2.5a.75.75 0 010 1.5h-2.5v2.5a.75.75 0 01-1.5 0v-2.5h-2.5a.75.75 0 010-1.5h2.5v-2.5A.75.75 0 018 4z"/>
                        </svg>
                        Story
                    </span>
                    <span class="user-story-id">SNOW-FLOW-001</span>
                    <span class="user-story-status">Ready for Dev</span>
                </div>

                <div class="user-story-body">
                    <div class="user-story-label">User Story</div>
                    <h3 class="user-story-title" id="storyTitle">Implement Snow-Flow for ServiceNow Development</h3>
                    <p class="user-story-text">
                        <strong>As a</strong> <span id="storyRole">ServiceNow developer</span>,<br>
                        <strong>I want to</strong> implement Snow-Flow<br>
                        <strong>So that</strong> <span class="user-story-completion" id="storyCompletion">we can use our own AI models</span>
                    </p>
                </div>

                <div class="user-story-footer">
                    <div class="user-story-meta">
                        <svg viewBox="0 0 16 16" fill="currentColor">
                            <path d="M8 8a3 3 0 100-6 3 3 0 000 6zm2-3a2 2 0 11-4 0 2 2 0 014 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                        </svg>
                        Your Team
                    </div>
                    <div class="user-story-meta">
                        <svg viewBox="0 0 16 16" fill="currentColor">
                            <path d="M3.5 0a.5.5 0 01.5.5V1h8V.5a.5.5 0 011 0V1h1a2 2 0 012 2v11a2 2 0 01-2 2H2a2 2 0 01-2-2V3a2 2 0 012-2h1V.5a.5.5 0 01.5-.5zM1 4v10a1 1 0 001 1h12a1 1 0 001-1V4H1z"/>
                        </svg>
                        Sprint 1
                    </div>
                    <span class="user-story-points">8 pts</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Why Snow-Flow Section -->
    <section id="why" class="section why-section">
        <div class="container">
            <div class="section-header">
                <span class="section-label">{t('why.label')}</span>
                <h2 class="section-title">{t('why.title')}</h2>
                <p class="section-subtitle">
                    {t('why.subtitle')}
                </p>
            </div>

            <div class="why-grid">
                <div class="why-card problem">
                    <div class="why-card-icon">X</div>
                    <h3 class="why-card-title">{t('why.problemTitle')}</h3>
                    <ul class="why-card-list">
                        <li>{t('why.problem1')}</li>
                        <li>{t('why.problem2')}</li>
                        <li>{t('why.problem3')}</li>
                        <li>{t('why.problem4')}</li>
                        <li>{t('why.problem5')}</li>
                        <li>{t('why.problem6')}</li>
                    </ul>
                </div>

                <div class="why-card">
                    <div class="why-card-icon">S</div>
                    <h3 class="why-card-title">{t('why.solutionTitle')}</h3>
                    <ul class="why-card-list">
                        <li>{t('why.solution1')}</li>
                        <li>{t('why.solution2')}</li>
                        <li>{t('why.solution3')}</li>
                        <li>{t('why.solution4')}</li>
                        <li>{t('why.solution5')}</li>
                        <li>{t('why.solution6')}</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Autonomous Stories Section -->
    <section id="autonomous" class="section autonomous-section">
        <div class="container">
            <div class="section-header">
                <span class="section-label">{t('autonomous.label')}</span>
                <h2 class="section-title">{t('autonomous.title')}<br>{t('autonomous.titleBreak')}</h2>
                <p class="section-subtitle">
                    {t('autonomous.subtitle')}
                </p>
            </div>

            <div class="autonomous-grid">
                <div class="feature-card">
                    <span class="feature-card-badge">{t('autonomous.enterprise')}</span>
                    <div class="feature-card-icon">J</div>
                    <h3 class="feature-card-title">{t('autonomous.jiraTitle')}</h3>
                    <p class="feature-card-desc">{t('autonomous.jiraDesc')}</p>
                </div>

                <div class="feature-card">
                    <span class="feature-card-badge">{t('autonomous.enterprise')}</span>
                    <div class="feature-card-icon">A</div>
                    <h3 class="feature-card-title">{t('autonomous.azureTitle')}</h3>
                    <p class="feature-card-desc">{t('autonomous.azureDesc')}</p>
                </div>

                <div class="feature-card">
                    <span class="feature-card-badge">{t('autonomous.enterprise')}</span>
                    <div class="feature-card-icon">G</div>
                    <h3 class="feature-card-title">{t('autonomous.githubTitle')}</h3>
                    <p class="feature-card-desc">{t('autonomous.githubDesc')}</p>
                </div>

                <div class="feature-card">
                    <span class="feature-card-badge">{t('autonomous.enterprise')}</span>
                    <div class="feature-card-icon">L</div>
                    <h3 class="feature-card-title">{t('autonomous.gitlabTitle')}</h3>
                    <p class="feature-card-desc">{t('autonomous.gitlabDesc')}</p>
                </div>

                <div class="feature-card">
                    <div class="feature-card-icon">U</div>
                    <h3 class="feature-card-title">{t('autonomous.updateSetsTitle')}</h3>
                    <p class="feature-card-desc">{t('autonomous.updateSetsDesc')}</p>
                </div>

                <div class="feature-card">
                    <span class="feature-card-badge">{t('autonomous.enterprise')}</span>
                    <div class="feature-card-icon">C</div>
                    <h3 class="feature-card-title">{t('autonomous.confluenceTitle')}</h3>
                    <p class="feature-card-desc">{t('autonomous.confluenceDesc')}</p>
                </div>

                <div class="feature-card">
                    <div class="feature-card-icon">K</div>
                    <h3 class="feature-card-title">{t('autonomous.kbTitle')}</h3>
                    <p class="feature-card-desc">{t('autonomous.kbDesc')}</p>
                </div>

                <div class="feature-card">
                    <div class="feature-card-icon">M</div>
                    <h3 class="feature-card-title">{t('autonomous.multiAgentTitle')}</h3>
                    <p class="feature-card-desc">{t('autonomous.multiAgentDesc')}</p>
                </div>
            </div>

            <!-- Workflow Visualization -->
            <div class="workflow">
                <div class="workflow-step">
                    <div class="workflow-step-num">1</div>
                    <div class="workflow-step-title">Pull Story</div>
                    <div class="workflow-step-desc">From GitHub, GitLab, Jira, or Azure DevOps</div>
                </div>
                <div class="workflow-step">
                    <div class="workflow-step-num">2</div>
                    <div class="workflow-step-title">Create Update Set</div>
                    <div class="workflow-step-desc">Isolated per story</div>
                </div>
                <div class="workflow-step">
                    <div class="workflow-step-num">3</div>
                    <div class="workflow-step-title">Build & Test</div>
                    <div class="workflow-step-desc">Autonomous development</div>
                </div>
                <div class="workflow-step">
                    <div class="workflow-step-num">4</div>
                    <div class="workflow-step-title">Document</div>
                    <div class="workflow-step-desc">Confluence or ServiceNow</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Comparison Table Section -->
    <section id="comparison" class="section comparison-section">
        <div class="container">
            <div class="section-header">
                <span class="section-label">Platform Comparison</span>
                <h2 class="section-title">Snow-Flow vs ServiceNow Build Agent</h2>
                <p class="section-subtitle">
                    See how Snow-Flow's open, flexible approach compares to ServiceNow's proprietary AI solution.
                </p>
            </div>

            <!-- Brand Headers (aligned with table columns) -->
            <div class="comparison-brands">
                <div class="comparison-brand snow-flow">
                    <div class="comparison-brand-logo">Snow-Flow</div>
                    <div class="comparison-brand-tagline">Open-source AI development platform</div>
                    <span class="comparison-brand-badge">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        Open Source
                    </span>
                </div>
                <div class="comparison-brand build-agent">
                    <div class="comparison-brand-logo">Build Agent</div>
                    <div class="comparison-brand-tagline">ServiceNow's proprietary AI tool</div>
                    <span class="comparison-brand-badge">
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
                        Closed Source
                    </span>
                </div>
            </div>

            <!-- Comparison Rows -->
            <div class="comparison-rows">
                <!-- AI Models -->
                <div class="comparison-row">
                    <div class="comparison-cell feature">
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">AI Model Choice</div>
                            <div class="comparison-cell-desc">Which AI models can you use?</div>
                        </div>
                    </div>
                    <div class="comparison-cell snow-flow-cell">
                        <span class="comparison-cell-icon check">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        </span>
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">75+ AI Providers<span class="comparison-tag">Your choice</span></div>
                            <div class="comparison-cell-desc">Claude, GPT-4o, DeepSeek, Gemini, Llama, local models, and even MID Server-hosted LLMs</div>
                        </div>
                    </div>
                    <div class="comparison-cell build-agent-cell">
                        <span class="comparison-cell-icon partial">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                        </span>
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">4 Integrated Providers</div>
                            <div class="comparison-cell-desc">NowLLM, Azure OpenAI, Gemini, Claude (AWS) - no BYOK/BYOLLM, no MID Server or local models</div>
                        </div>
                    </div>
                </div>

                <!-- Development Environment -->
                <div class="comparison-row">
                    <div class="comparison-cell feature">
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">Development Environment</div>
                            <div class="comparison-cell-desc">Where do you write code?</div>
                        </div>
                    </div>
                    <div class="comparison-cell snow-flow-cell">
                        <span class="comparison-cell-icon check">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        </span>
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">Any IDE or Terminal<span class="comparison-tag">Flexible</span></div>
                            <div class="comparison-cell-desc">VS Code, Cursor, JetBrains, Neovim, terminal - work where you're productive</div>
                        </div>
                    </div>
                    <div class="comparison-cell build-agent-cell">
                        <span class="comparison-cell-icon x">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </span>
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">Browser Only</div>
                            <div class="comparison-cell-desc">Limited to ServiceNow Studio in browser, no local development</div>
                        </div>
                    </div>
                </div>

                <!-- Tooling -->
                <div class="comparison-row">
                    <div class="comparison-cell feature">
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">MCP Tooling</div>
                            <div class="comparison-cell-desc">Available development tools</div>
                        </div>
                    </div>
                    <div class="comparison-cell snow-flow-cell">
                        <span class="comparison-cell-icon check">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        </span>
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">410+ MCP Tools<span class="comparison-tag">Standard</span></div>
                            <div class="comparison-cell-desc">23 specialized servers, open protocol, works with any MCP-compatible client</div>
                        </div>
                    </div>
                    <div class="comparison-cell build-agent-cell">
                        <span class="comparison-cell-icon x">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </span>
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">Proprietary API</div>
                            <div class="comparison-cell-desc">Custom non-standard interface, limited to Build Agent capabilities</div>
                        </div>
                    </div>
                </div>

                <!-- Integrations -->
                <div class="comparison-row">
                    <div class="comparison-cell feature">
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">External Integrations</div>
                            <div class="comparison-cell-desc">Connect to your existing tools</div>
                        </div>
                    </div>
                    <div class="comparison-cell snow-flow-cell">
                        <span class="comparison-cell-icon check">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        </span>
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">Full DevOps Stack<span class="comparison-tag">Enterprise</span></div>
                            <div class="comparison-cell-desc">GitHub, GitLab, Jira, Azure DevOps, Confluence, Slack - bidirectional sync</div>
                        </div>
                    </div>
                    <div class="comparison-cell build-agent-cell">
                        <span class="comparison-cell-icon x">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </span>
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">ServiceNow Only</div>
                            <div class="comparison-cell-desc">Limited to ServiceNow ecosystem, manual handoffs to external tools</div>
                        </div>
                    </div>
                </div>

                <!-- Update Sets -->
                <div class="comparison-row">
                    <div class="comparison-cell feature">
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">Update Set Management</div>
                            <div class="comparison-cell-desc">How changes are tracked</div>
                        </div>
                    </div>
                    <div class="comparison-cell snow-flow-cell">
                        <span class="comparison-cell-icon check">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        </span>
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">Automatic Tracking<span class="comparison-tag">AI-Managed</span></div>
                            <div class="comparison-cell-desc">1 story = 1 update set, automatic creation, scoped apps, full audit trail</div>
                        </div>
                    </div>
                    <div class="comparison-cell build-agent-cell">
                        <span class="comparison-cell-icon partial">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>
                        </span>
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">Manual Process</div>
                            <div class="comparison-cell-desc">Developer must manually create and manage update sets</div>
                        </div>
                    </div>
                </div>

                <!-- Cost -->
                <div class="comparison-row">
                    <div class="comparison-cell feature">
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">Pricing</div>
                            <div class="comparison-cell-desc">Total cost of ownership</div>
                        </div>
                    </div>
                    <div class="comparison-cell snow-flow-cell">
                        <span class="comparison-cell-icon check">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        </span>
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">$0 or $99/dev/month<span class="comparison-tag">90% savings</span></div>
                            <div class="comparison-cell-desc">Open source free forever, Enterprise at $99/dev with integrations</div>
                        </div>
                    </div>
                    <div class="comparison-cell build-agent-cell">
                        <span class="comparison-cell-icon x">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </span>
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">$150K+ Implementation</div>
                            <div class="comparison-cell-desc">Plus $100-200/user/month licensing, typically $300K-$4.5M total</div>
                        </div>
                    </div>
                </div>

                <!-- Source Code -->
                <div class="comparison-row">
                    <div class="comparison-cell feature">
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">Source Code Access</div>
                            <div class="comparison-cell-desc">Transparency and customization</div>
                        </div>
                    </div>
                    <div class="comparison-cell snow-flow-cell">
                        <span class="comparison-cell-icon check">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"></polyline></svg>
                        </span>
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">Fully Open Source<span class="comparison-tag">Audit</span></div>
                            <div class="comparison-cell-desc">Elastic License 2.0, audit every line, customize freely, community-driven</div>
                        </div>
                    </div>
                    <div class="comparison-cell build-agent-cell">
                        <span class="comparison-cell-icon x">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                        </span>
                        <div class="comparison-cell-content">
                            <div class="comparison-cell-title">Closed Source</div>
                            <div class="comparison-cell-desc">Proprietary black box, no visibility into how it works</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Summary Cards -->
            <div class="comparison-summary">
                <div class="comparison-summary-card">
                    <div class="comparison-summary-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><path d="M16 8l-4 4-4-4"></path><path d="M12 12v6"></path></svg>
                    </div>
                    <div class="comparison-summary-content">
                        <h4>No Vendor Lock-in</h4>
                        <p>Switch AI models anytime. Your prompts, your data, your choice.</p>
                    </div>
                </div>
                <div class="comparison-summary-card">
                    <div class="comparison-summary-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg>
                    </div>
                    <div class="comparison-summary-content">
                        <h4><span class="comparison-summary-stat">90%</span> Cost Reduction</h4>
                        <p>Open source core vs $150K+ implementation fees.</p>
                    </div>
                </div>
                <div class="comparison-summary-card">
                    <div class="comparison-summary-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>
                    </div>
                    <div class="comparison-summary-content">
                        <h4>Developer Freedom</h4>
                        <p>Code in your IDE, not a browser. Works with your existing workflow.</p>
                    </div>
                </div>
                <div class="comparison-summary-card">
                    <div class="comparison-summary-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><polyline points="9 12 11 14 15 10"></polyline></svg>
                    </div>
                    <div class="comparison-summary-content">
                        <h4>Full Transparency</h4>
                        <p>Every line on GitHub. Audit, customize, and contribute freely.</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Pricing Section -->
    <section id="pricing" class="section pricing-section">
        <div class="container">
            <div class="section-header">
                <span class="section-label">{t('nav.pricing')}</span>
                <h2 class="section-title">{t('pricing.title')}</h2>
                <p class="section-subtitle">
                    {t('pricing.subtitle')}
                </p>
            </div>

            <div class="pricing-grid">
                <div class="pricing-card">
                    <span class="pricing-badge">Open Source</span>
                    <h3 class="pricing-name">Free</h3>
                    <div class="pricing-price">$0<span>/forever</span></div>
                    <ul class="pricing-features">
                        <li>410+ MCP tools</li>
                        <li>75+ AI providers</li>
                        <li>Self-hosted</li>
                        <li>Unlimited instances</li>
                        <li>Community support</li>
                    </ul>
                    <a href="https://github.com/groeimetai/snow-flow" class="pricing-cta">Get Started</a>
                </div>

                <div class="pricing-card featured">
                    <span class="pricing-badge">Most Popular</span>
                    <h3 class="pricing-name">Individual</h3>
                    <div class="pricing-price">$99<span>/mo</span></div>
                    <ul class="pricing-features">
                        <li>Everything in Free</li>
                        <li>Jira, Azure DevOps, Confluence</li>
                        <li>Managed SaaS (EU)</li>
                        <li>99.9% SLA</li>
                        <li>24h email support</li>
                    </ul>
                    <a href="https://portal.snow-flow.dev" class="pricing-cta">Start Trial</a>
                </div>

                <div class="pricing-card">
                    <span class="pricing-badge">Teams</span>
                    <h3 class="pricing-name">Teams</h3>
                    <div class="pricing-price">$79<span>/seat/mo</span></div>
                    <ul class="pricing-features">
                        <li>Everything in Individual</li>
                        <li>Developer + Stakeholder seats</li>
                        <li>User management portal</li>
                        <li>Usage analytics</li>
                        <li>4h priority support</li>
                    </ul>
                    <a href="https://portal.snow-flow.dev" class="pricing-cta">Start Trial</a>
                </div>

                <div class="pricing-card">
                    <span class="pricing-badge">Enterprise</span>
                    <h3 class="pricing-name">Enterprise</h3>
                    <div class="pricing-price">Custom</div>
                    <ul class="pricing-features">
                        <li>Everything in Teams</li>
                        <li>50+ seat packages</li>
                        <li>Dedicated account manager</li>
                        <li>Custom SLA</li>
                        <li>SOC 2 / ISO 27001</li>
                    </ul>
                    <a href="mailto:sales@snow-flow.dev" class="pricing-cta">Contact Sales</a>
                </div>
            </div>
        </div>
    </section>

    <!-- Built by Developers Section -->
    <section class="section developers-section">
        <div class="container">
            <div class="section-header">
                <span class="section-label">Philosophy</span>
                <h2 class="section-title">{t('developers.title')}<br>{t('developers.titleBreak')}</h2>
            </div>

            <div class="developers-quote">
                <p class="developers-quote-text">
                    "We got tired of being told which AI we could use. Snow-Flow is our answer: <span class="highlight">use any model, any IDE, any way you want.</span>"
                </p>
                <p class="developers-quote-author">The Snow-Flow Team</p>
            </div>

            <div class="tui-screenshot">
                <video
                    src="/recording-snow-flow.mp4?v=2"
                    autoplay
                    loop
                    muted
                    playsinline
                    poster="/snow-flow-tui.png"
                    class="tui-image"
                    aria-label="Snow-Flow TUI - Interactive terminal interface for ServiceNow development"
                >
                    <!-- Fallback for browsers that don't support video -->
                    <img src="/snow-flow-tui.png" alt="Snow-Flow TUI - Interactive terminal interface for ServiceNow development" class="tui-image" />
                </video>
                <p class="tui-caption">The Snow-Flow TUI - Your AI-powered ServiceNow development environment</p>
            </div>
        </div>
    </section>

    <!-- Stats Section -->
    <section id="stats" class="section stats-section">
        <div class="container">
            <div class="section-header">
                <span class="section-badge">The Platform</span>
                <h2 class="section-title">One Platform. Complete ServiceNow Development.</h2>
                <p class="section-subtitle">Snow-Flow combines MCP tools, a built-in TUI, and optional enterprise integrations. Everything you need in one package.</p>
            </div>

            <!-- Platform Cards -->
            <div class="platform-grid">
                <!-- Snow-Flow -->
                <div class="platform-card">
                    <div class="platform-card-header">
                        <div class="platform-icon cyan">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                            </svg>
                        </div>
                        <span class="platform-badge open">Open Source</span>
                    </div>
                    <h3 class="platform-name">Snow-Flow</h3>
                    <p class="platform-tagline">The Engine</p>
                    <p class="platform-desc">The core of the platform. 225+ MCP tools that connect any AI model to ServiceNow. Conversational development, ES5 validation, Update Set management, and local IDE integration.</p>
                    <div class="platform-stats">
                        <div class="platform-stat-row highlight">
                            <span class="platform-stat-label">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: -2px; margin-right: 4px;"><path d="M12 .587l3.668 7.431 8.2 1.191-5.934 5.782 1.4 8.172L12 19.896l-7.334 3.855 1.4-8.172L.132 9.797l8.2-1.191z"/></svg>
                                GitHub Stars
                            </span>
                            <span class="platform-stat-value star-count" id="snowFlowStars">-</span>
                        </div>
                        <div class="platform-stat-row">
                            <span class="platform-stat-label">MCP Tools</span>
                            <span class="platform-stat-value">225+</span>
                        </div>
                        <div class="platform-stat-row">
                            <span class="platform-stat-label">ServiceNow APIs</span>
                            <span class="platform-stat-value">18</span>
                        </div>
                    </div>
                    <a href="https://github.com/groeimetai/snow-flow" class="platform-link" target="_blank">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>
                        View on GitHub
                    </a>
                </div>

                <!-- Snow-Flow TUI (Built-in) -->
                <div class="platform-card">
                    <div class="platform-card-header">
                        <div class="platform-icon purple">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="16 18 22 12 16 6"></polyline>
                                <polyline points="8 6 2 12 8 18"></polyline>
                            </svg>
                        </div>
                        <span class="platform-badge open">Built-in</span>
                    </div>
                    <h3 class="platform-name">Snow-Flow TUI</h3>
                    <p class="platform-tagline">The Interface</p>
                    <p class="platform-desc">Your development environment. A terminal-based AI IDE with OAuth authentication, multi-instance support, and project management. Works with any LLM. Just run <code>snow-flow</code> to start.</p>
                    <div class="platform-stats">
                        <div class="platform-stat-row">
                            <span class="platform-stat-label">LLM Providers</span>
                            <span class="platform-stat-value">75+</span>
                        </div>
                        <div class="platform-stat-row">
                            <span class="platform-stat-label">IDE Integrations</span>
                            <span class="platform-stat-value">5</span>
                        </div>
                        <div class="platform-stat-row">
                            <span class="platform-stat-label">TUI Commands</span>
                            <span class="platform-stat-value">/auth /help</span>
                        </div>
                    </div>
                    <a href="https://github.com/groeimetai/snow-flow" class="platform-link" target="_blank">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/></svg>
                        View on GitHub
                    </a>
                </div>

                <!-- Enterprise -->
                <div class="platform-card enterprise-card">
                    <div class="platform-card-header">
                        <div class="platform-icon orange">
                            <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                            </svg>
                        </div>
                        <span class="platform-badge closed">Closed Source</span>
                    </div>
                    <h3 class="platform-name">Enterprise</h3>
                    <p class="platform-tagline">The Integrations</p>
                    <p class="platform-desc">Connect to the rest of your stack. Managed SaaS with encrypted credential storage, Jira/Azure DevOps/Confluence connectors, monitoring dashboards, and stakeholder access.</p>
                    <div class="platform-stats">
                        <div class="platform-stat-row">
                            <span class="platform-stat-label">Integrations</span>
                            <span class="platform-stat-value">40+</span>
                        </div>
                        <div class="platform-stat-row">
                            <span class="platform-stat-label">Stakeholder Seats</span>
                            <span class="platform-stat-value">Unlimited</span>
                        </div>
                        <div class="platform-stat-row">
                            <span class="platform-stat-label">Security</span>
                            <span class="platform-stat-value">SOC 2</span>
                        </div>
                    </div>
                    <a href="https://portal.snow-flow.dev/pricing" class="platform-link enterprise-link">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                        View Pricing
                    </a>
                </div>
            </div>

            <!-- Value Metrics -->
            <div class="total-stats-bar">
                <div class="total-stat">
                    <span class="total-stat-value" id="totalStars">-</span>
                    <span class="total-stat-label">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor" style="vertical-align: -2px; margin-right: 4px;"><path d="M12 .587l3.668 7.431 8.2 1.191-5.934 5.782 1.4 8.172L12 19.896l-7.334 3.855 1.4-8.172L.132 9.797l8.2-1.191z"/></svg>
                        Total Stars
                    </span>
                </div>
                <div class="total-stat">
                    <span class="total-stat-value">265+</span>
                    <span class="total-stat-label">MCP Tools</span>
                </div>
                <div class="total-stat">
                    <span class="total-stat-value">75+</span>
                    <span class="total-stat-label">LLM Providers</span>
                </div>
                <div class="total-stat">
                    <span class="total-stat-value">40+</span>
                    <span class="total-stat-label">Integrations</span>
                </div>
            </div>

            <!-- Open Source Philosophy -->
            <div class="philosophy-section">
                <div class="philosophy-card open-source">
                    <div class="philosophy-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M12 16v-4M12 8h.01"></path>
                        </svg>
                    </div>
                    <h4>Why Open Source?</h4>
                    <p>We believe ServiceNow development should be accessible to everyone. Open source means you can verify what runs on your systems, customize for your needs, and never get locked into a single vendor. Snow-Flow and Snow-Code will always be free.</p>
                </div>
                <div class="philosophy-card closed-source">
                    <div class="philosophy-icon">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                        </svg>
                    </div>
                    <h4>Why Enterprise is Closed?</h4>
                    <p>Enterprise stores your Jira, Azure DevOps, and Confluence credentials. This requires bank-grade encryption (Google Cloud KMS), SOC 2 compliance, and audit trails. We keep this closed to protect your secrets and maintain security certifications.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-brand">
                <a href={`/${lang}/`} class="footer-logo" aria-label="Snow-Flow Home">
                    <svg class="footer-logo-svg" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="footer-gradient" x1="16" y1="9" x2="16" y2="23" gradientUnits="userSpaceOnUse">
                                <stop offset="0%" stop-color="#FFFFFF"/>
                                <stop offset="100%" stop-color="#00D9FF"/>
                            </linearGradient>
                        </defs>
                        <path d="M4 23 L10 9 L16 15 L22 9 L28 23 Z" fill="url(#footer-gradient)" stroke="#00D9FF" stroke-width="1.2" stroke-linejoin="round"/>
                    </svg>
                    <span class="footer-logo-text">
                        <span class="snow">SNOW</span><span class="flow">FLOW</span>
                    </span>
                </a>
                <p class="footer-tagline">
                    {t('footer.tagline')}
                </p>
            </div>

            <div class="footer-grid">
                <div class="footer-column">
                    <h4>{t('footer.product')}</h4>
                    <ul>
                        <li><a href="https://portal.snow-flow.dev/pricing">{t('nav.pricing')}</a></li>
                        <li><a href="#autonomous">{t('nav.features')}</a></li>
                        <li><a href="https://docs.snow-flow.dev/">{t('nav.documentation')}</a></li>
                        <li><a href="https://status.snow-flow.dev">{t('nav.status')}</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Enterprise</h4>
                    <ul>
                        <li><a href="mailto:sales@snow-flow.dev">{t('footer.contact')}</a></li>
                        <li><a href="https://portal.snow-flow.dev">Portal</a></li>
                        <li><a href="#comparison">{t('nav.vsBuildAgent')}</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>{t('footer.resources')}</h4>
                    <ul>
                        <li><a href="https://github.com/groeimetai/snow-flow">{t('nav.github')}</a></li>
                        <li><a href="https://discord.gg/snowflow">Discord</a></li>
                        <li><a href="https://github.com/groeimetai/snow-flow">Snow-Flow TUI</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>{t('footer.company')}</h4>
                    <ul>
                        <li><a href="mailto:hello@snow-flow.dev">{t('footer.about')}</a></li>
                        <li><a href="https://github.com/groeimetai/snow-flow/issues">Support</a></li>
                        <li><a href="mailto:sales@snow-flow.dev">{t('footer.contact')}</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4>Legal</h4>
                    <ul>
                        <li><a href="https://github.com/groeimetai/snow-flow/blob/main/PRIVACY.md">Privacy Policy</a></li>
                        <li><a href="https://github.com/groeimetai/snow-flow/blob/main/TERMS.md">Terms of Service</a></li>
                        <li><a href="https://github.com/groeimetai/snow-flow/blob/main/LICENSE">License (Elastic v2)</a></li>
                        <li><a href="https://portal.snow-flow.dev/legal/privacy">Enterprise Privacy</a></li>
                        <li><a href="https://portal.snow-flow.dev/legal/terms">Enterprise Terms</a></li>
                    </ul>
                </div>
            </div>

            <div class="footer-bottom">
                <div class="footer-social">
                    <a href="https://github.com/groeimetai/snow-flow" aria-label="GitHub">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 0C5.37 0 0 5.37 0 12c0 5.31 3.435 9.795 8.205 11.385.6.105.825-.255.825-.57 0-.285-.015-1.23-.015-2.235-3.015.555-3.795-.735-4.035-1.41-.135-.345-.72-1.41-1.23-1.695-.42-.225-1.02-.78-.015-.795.945-.015 1.62.87 1.845 1.23 1.08 1.815 2.805 1.305 3.495.99.105-.78.42-1.305.765-1.605-2.67-.3-5.46-1.335-5.46-5.925 0-1.305.465-2.385 1.23-3.225-.12-.3-.54-1.53.12-3.18 0 0 1.005-.315 3.3 1.23.96-.27 1.98-.405 3-.405s2.04.135 3 .405c2.295-1.56 3.3-1.23 3.3-1.23.66 1.65.24 2.88.12 3.18.765.84 1.23 1.905 1.23 3.225 0 4.605-2.805 5.625-5.475 5.925.435.375.81 1.095.81 2.22 0 1.605-.015 2.895-.015 3.3 0 .315.225.69.825.57A12.02 12.02 0 0024 12c0-6.63-5.37-12-12-12z"/>
                        </svg>
                    </a>
                    <a href="https://discord.gg/snowflow" aria-label="Discord">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"/>
                        </svg>
                    </a>
                    <a href="https://www.linkedin.com/company/109538221" aria-label="LinkedIn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                        </svg>
                    </a>
                </div>
                <p class="footer-copyright">
                    {t('footer.copyright')}
                </p>
            </div>
        </div>
    </footer>

    <script>
        // Active section detection for nav links
        const sections = document.querySelectorAll('section[id]');
        const navLinks = document.querySelectorAll('.nav-links a[href^="#"]');

        function setActiveLink() {
            const scrollY = window.pageYOffset;

            sections.forEach(section => {
                const sectionHeight = section.offsetHeight;
                const sectionTop = section.offsetTop - 100;
                const sectionId = section.getAttribute('id');

                if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
                    navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === '#' + sectionId) {
                            link.classList.add('active');
                        }
                    });
                }
            });

            // If at top of page, activate first link
            if (scrollY < 100) {
                navLinks.forEach(link => link.classList.remove('active'));
                if (navLinks[0]) navLinks[0].classList.add('active');
            }
        }

        window.addEventListener('scroll', setActiveLink);
        setActiveLink(); // Initial call

        // Smooth scroll for anchor links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    const offset = 80;
                    const targetPosition = target.offsetTop - offset;
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.animate-on-scroll').forEach(el => {
            observer.observe(el);
        });

        // User Story Typewriter Animation with Multiple Personas
        (function() {
            const personas = [
                {
                    role: "ServiceNow developer",
                    title: "Implement Snow-Flow for ServiceNow Development",
                    completions: [
                        "we can use our own AI models",
                        "we never have to leave our IDE again",
                        "we stop paying $150K for vendor lock-in",
                        "we can deploy widgets in minutes, not days",
                        "we write ServiceNow code with Claude, GPT, or DeepSeek",
                        "we finally escape NowLLM-only restrictions",
                        "we automate the boring stuff"
                    ]
                },
                {
                    role: "Platform team lead",
                    title: "Automate ServiceNow Delivery Pipeline",
                    completions: [
                        "our GitHub issues deploy themselves",
                        "every GitLab merge request triggers development",
                        "Jira stories complete autonomously",
                        "Azure DevOps work items build themselves",
                        "junior devs ship like seniors",
                        "every update set is automatically tracked",
                        "we get full audit trails on every change"
                    ]
                }
            ];

            const completionEl = document.getElementById('storyCompletion');
            const roleEl = document.getElementById('storyRole');
            const titleEl = document.getElementById('storyTitle');
            if (!completionEl || !roleEl || !titleEl) return;

            let personaIndex = 0;
            let completionIndex = 0;
            let currentText = '';
            let isDeleting = false;
            let typingSpeed = 50;
            let completionsShownForPersona = 0;
            const completionsPerPersona = 3; // Show 3 completions before switching persona

            function updatePersonaDisplay() {
                const persona = personas[personaIndex];
                roleEl.style.opacity = '0';
                titleEl.style.opacity = '0';

                setTimeout(function() {
                    roleEl.textContent = persona.role;
                    titleEl.textContent = persona.title;
                    roleEl.style.opacity = '1';
                    titleEl.style.opacity = '1';
                }, 300);
            }

            // Add transition styles
            roleEl.style.transition = 'opacity 0.3s ease';
            titleEl.style.transition = 'opacity 0.3s ease';

            function typeWriter() {
                const persona = personas[personaIndex];
                const fullText = persona.completions[completionIndex];

                if (isDeleting) {
                    currentText = fullText.substring(0, currentText.length - 1);
                    typingSpeed = 30;
                } else {
                    currentText = fullText.substring(0, currentText.length + 1);
                    typingSpeed = 50;
                }

                completionEl.textContent = currentText;

                if (!isDeleting && currentText === fullText) {
                    // Pause at end of word
                    typingSpeed = 2500;
                    isDeleting = true;
                } else if (isDeleting && currentText === '') {
                    isDeleting = false;
                    completionsShownForPersona++;

                    // Move to next completion in current persona
                    completionIndex = (completionIndex + 1) % persona.completions.length;

                    // Switch persona after showing enough completions
                    if (completionsShownForPersona >= completionsPerPersona) {
                        completionsShownForPersona = 0;
                        personaIndex = (personaIndex + 1) % personas.length;
                        completionIndex = 0;
                        updatePersonaDisplay();
                        typingSpeed = 800; // Longer pause when switching personas
                    } else {
                        typingSpeed = 500;
                    }
                }

                setTimeout(typeWriter, typingSpeed);
            }

            // Start the animation
            setTimeout(typeWriter, 1000);
        })();

        // Stats Section Animation
        (function() {
            const statsSection = document.querySelector('.stats-section');
            if (!statsSection) return;

            // Animated counter function
            function animateCounter(element, target, duration = 2000) {
                if (!element) return;
                const start = 0;
                const startTime = performance.now();

                function update(currentTime) {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);
                    const easeOutQuart = 1 - Math.pow(1 - progress, 4);
                    const current = Math.floor(start + (target - start) * easeOutQuart);
                    element.textContent = current.toLocaleString();
                    if (progress < 1) {
                        requestAnimationFrame(update);
                    }
                }

                requestAnimationFrame(update);
            }

            // GitHub stars data (TUI is now part of snow-flow)
            const starsData = {
                snowFlow: 0,
                fetched: false
            };

            let starsAnimated = false;

            function updateStarCounters() {
                if (starsAnimated) return;

                const snowFlowStarsEl = document.getElementById('snowFlowStars');
                const totalStarsEl = document.getElementById('totalStars');

                if (starsData.snowFlow > 0) {
                    animateCounter(snowFlowStarsEl, starsData.snowFlow, 1500);
                } else if (starsData.fetched) {
                    if (snowFlowStarsEl) snowFlowStarsEl.textContent = '0';
                }

                // Total stars = just snow-flow now (TUI is integrated)
                if (starsData.snowFlow > 0) {
                    animateCounter(totalStarsEl, starsData.snowFlow, 2000);
                } else if (starsData.fetched) {
                    if (totalStarsEl) totalStarsEl.textContent = '0';
                }

                if (starsData.fetched) {
                    starsAnimated = true;
                }
            }

            // Fetch GitHub stars for snow-flow repo (TUI is now integrated)
            async function fetchGitHubStars() {
                const repos = [
                    { key: 'snowFlow', url: 'https://api.github.com/repos/groeimetai/snow-flow' }
                ];

                for (const repo of repos) {
                    try {
                        const response = await fetch(repo.url);
                        if (response.ok) {
                            const data = await response.json();
                            starsData[repo.key] = data.stargazers_count || 0;
                        }
                    } catch (e) {
                        // Use fallback of 0
                    }
                }
                // Total = just snow-flow (TUI is integrated)
                starsData.fetched = true;

                // Update counters if stats section is already visible
                if (statsSection.classList.contains('animated')) {
                    updateStarCounters();
                }
            }

            // Fetch stars on page load
            fetchGitHubStars();

            const statsObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // Add animated class to trigger CSS animations
                        statsSection.classList.add('animated');

                        // Update and animate star counters
                        updateStarCounters();

                        statsObserver.disconnect();
                    }
                });
            }, { threshold: 0.2 });

            statsObserver.observe(statsSection);
        })();

        // Console easter egg
        console.log('%cSnow-Flow', 'font-size: 40px; font-weight: bold; background: linear-gradient(135deg, #00D9FF 0%, #8B5CF6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;');
        console.log('%cBreak free from vendor lock-in. Use YOUR AI.', 'font-size: 14px; color: #94A3B8;');
        console.log('%chttps://github.com/groeimetai/snow-flow', 'font-size: 12px; color: #00D9FF;');
    </script>
</BaseLayout>
