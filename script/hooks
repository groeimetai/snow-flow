#!/bin/sh

if [ ! -d ".git" ]; then
    exit 0
fi

mkdir -p .git/hooks

cat > .git/hooks/pre-push << 'EOF'
#!/bin/sh
# Ensure dependencies are installed before typecheck
if command -v bun >/dev/null 2>&1; then
  bun install >/dev/null 2>&1 || true
fi
bun run typecheck
EOF

chmod +x .git/hooks/pre-push
echo "âœ… Pre-push hook installed"
