---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getLangFromUrl, useTranslations, type Lang } from '../../i18n/utils';

export function getStaticPaths() {
  return [
    { params: { lang: 'en' } },
    { params: { lang: 'nl' } }
  ];
}

const lang = getLangFromUrl(Astro.url) as Lang;
const t = useTranslations(lang);

const title = lang === 'en' ? 'Documentation | Snow-Flow' : 'Documentatie | Snow-Flow';
const description = lang === 'en'
  ? 'Complete documentation for Snow-Flow - the open-source ServiceNow development platform. Installation, authentication, CLI commands, MCP tools, and best practices.'
  : 'Complete documentatie voor Snow-Flow - het open-source ServiceNow ontwikkelplatform. Installatie, authenticatie, CLI-commando\'s, MCP tools en best practices.';
---

<BaseLayout title={title} description={description}>
    <!-- Background Effects -->
    <div class="bg-grid"></div>
    <div class="bg-gradient"></div>

    <!-- Sidebar Backdrop -->
    <div class="sidebar-backdrop" id="sidebarBackdrop"></div>

    <!-- Layout -->
    <div class="docs-layout">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-section">
                <div class="sidebar-title">{lang === 'en' ? 'Getting Started' : 'Aan de Slag'}</div>
                <ul class="sidebar-links">
                    <li><a href="#introduction" class="active">{lang === 'en' ? 'Introduction' : 'Introductie'}</a></li>
                    <li><a href="#installation">{lang === 'en' ? 'Installation' : 'Installatie'}</a></li>
                    <li><a href="#quickstart">{lang === 'en' ? 'Quick Start' : 'Snelle Start'}</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">{lang === 'en' ? 'Authentication' : 'Authenticatie'}</div>
                <ul class="sidebar-links">
                    <li><a href="#auth-overview">{lang === 'en' ? 'Overview' : 'Overzicht'}</a></li>
                    <li><a href="#servicenow-oauth">ServiceNow OAuth</a></li>
                    <li><a href="#llm-providers">LLM Providers</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">CLI Reference</div>
                <ul class="sidebar-links">
                    <li><a href="#cli-commands">{lang === 'en' ? 'Commands' : 'Commando\'s'}</a></li>
                    <li><a href="#cli-agent">Agent Mode</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">MCP Tools</div>
                <ul class="sidebar-links">
                    <li><a href="#mcp-overview">{lang === 'en' ? 'Overview' : 'Overzicht'}</a></li>
                    <li><a href="#mcp-tools">{lang === 'en' ? 'Tool Categories' : 'Tool Categorieën'}</a></li>
                    <li><a href={`/${lang}/mcp-reference`}>{lang === 'en' ? 'Complete Reference' : 'Complete Referentie'}</a></li>
                </ul>
            </div>

            <div class="sidebar-section">
                <div class="sidebar-title">Best Practices</div>
                <ul class="sidebar-links">
                    <li><a href="#es5-javascript">ES5 JavaScript</a></li>
                    <li><a href="#update-sets">Update Sets</a></li>
                </ul>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="docs-content">
            <div class="docs-intro" id="introduction">
                <div class="version-badge">
                    <span class="v">Version</span>
                    <span class="num" id="npm-version">loading...</span>
                </div>
                <h1>{lang === 'en' ? 'Snow-Flow Documentation' : 'Snow-Flow Documentatie'}</h1>
                <p>
                    {lang === 'en'
                        ? 'Snow-Flow is an open-source, autonomous ServiceNow development platform. Use '
                        : 'Snow-Flow is een open-source, autonoom ServiceNow ontwikkelplatform. Gebruik '}
                    <strong>{lang === 'en' ? 'your approved AI models' : 'jouw goedgekeurde AI-modellen'}</strong>
                    {lang === 'en'
                        ? ' (Claude, GPT, DeepSeek, or local models) to build ServiceNow solutions through natural conversation in your terminal.'
                        : ' (Claude, GPT, DeepSeek, of lokale modellen) om ServiceNow oplossingen te bouwen via natuurlijke conversatie in je terminal.'}
                </p>
            </div>

            <!-- Installation -->
            <section id="installation">
                <h2>{lang === 'en' ? 'Installation' : 'Installatie'}</h2>

                <h3>{lang === 'en' ? 'Requirements' : 'Vereisten'}</h3>
                <ul>
                    <li><strong>Node.js 18+</strong> - {lang === 'en' ? 'Required runtime' : 'Vereiste runtime'}</li>
                    <li><strong>npm 8.0+</strong> - Package manager</li>
                    <li><strong>ServiceNow instance</strong> - {lang === 'en' ? 'With OAuth configured' : 'Met OAuth geconfigureerd'}</li>
                    <li><strong>LLM provider</strong> - {lang === 'en' ? 'API key or local Ollama' : 'API key of lokale Ollama'}</li>
                </ul>

                <h3>{lang === 'en' ? 'Install via npm' : 'Installeer via npm'}</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">bash</span>
                        <button class="code-copy">Copy</button>
                    </div>
                    <div class="code-content">
<pre><span class="comment"># Global installation (recommended)</span>
npm install -g snow-flow

<span class="comment"># Verify installation</span>
snow-flow --version</pre>
                    </div>
                </div>

                <div class="callout info">
                    <div class="callout-title">Tip</div>
                    <p>{lang === 'en'
                        ? 'For the best experience, we recommend using Snow-Flow with '
                        : 'Voor de beste ervaring raden we aan Snow-Flow te gebruiken met '}
                        <a href="https://github.com/groeimetai/snow-code">snow-code</a>
                        {lang === 'en'
                            ? ' - our AI-powered terminal interface based on Claude Code.'
                            : ' - onze AI-aangedreven terminal interface gebaseerd op Claude Code.'}
                    </p>
                </div>
            </section>

            <!-- Quick Start -->
            <section id="quickstart">
                <h2>{lang === 'en' ? 'Quick Start' : 'Snelle Start'}</h2>

                <h3>1. {lang === 'en' ? 'Initialize Project' : 'Project Initialiseren'}</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">bash</span>
                        <button class="code-copy">Copy</button>
                    </div>
                    <div class="code-content">
<pre><span class="comment"># Initialize Snow-Flow in your project</span>
snow-flow init

<span class="comment"># This creates:</span>
<span class="comment"># - .mcp.json (MCP server configuration)</span>
<span class="comment"># - CLAUDE.md (AI agent instructions)</span></pre>
                    </div>
                </div>

                <h3>2. {lang === 'en' ? 'Authenticate' : 'Authenticeren'}</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">bash</span>
                        <button class="code-copy">Copy</button>
                    </div>
                    <div class="code-content">
<pre><span class="comment"># Login to ServiceNow and configure LLM provider</span>
snow-flow auth login

<span class="comment"># Check authentication status</span>
snow-flow auth status</pre>
                    </div>
                </div>

                <h3>3. {lang === 'en' ? 'Start Building' : 'Begin met Bouwen'}</h3>
                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">bash</span>
                        <button class="code-copy">Copy</button>
                    </div>
                    <div class="code-content">
<pre><span class="comment"># Run an autonomous task</span>
snow-flow agent <span class="string">"Create a widget showing high-priority incidents"</span>

<span class="comment"># Query data</span>
snow-flow agent <span class="string">"Show me all incidents from last week"</span></pre>
                    </div>
                </div>
            </section>

            <div class="section-divider"></div>

            <!-- Authentication Overview -->
            <section id="auth-overview">
                <h2>{lang === 'en' ? 'Authentication Overview' : 'Authenticatie Overzicht'}</h2>
                <p>
                    {lang === 'en'
                        ? 'Snow-Flow uses OAuth 2.0 for secure ServiceNow authentication. Credentials are stored securely and automatically refreshed.'
                        : 'Snow-Flow gebruikt OAuth 2.0 voor veilige ServiceNow authenticatie. Credentials worden veilig opgeslagen en automatisch vernieuwd.'}
                </p>

                <h3>{lang === 'en' ? 'Authentication Priority' : 'Authenticatie Prioriteit'}</h3>
                <ol>
                    <li><strong>{lang === 'en' ? 'Environment variables' : 'Environment variabelen'}</strong> - {lang === 'en' ? 'Highest priority' : 'Hoogste prioriteit'}</li>
                    <li><strong>auth.json</strong> - {lang === 'en' ? 'Auto-loaded from snow-code' : 'Automatisch geladen van snow-code'}</li>
                    <li><strong>.mcp.json credentials</strong> - {lang === 'en' ? 'Project-specific' : 'Project-specifiek'}</li>
                    <li><strong>{lang === 'en' ? 'Interactive login' : 'Interactieve login'}</strong> - {lang === 'en' ? 'Prompts if none found' : 'Vraagt indien geen gevonden'}</li>
                </ol>
            </section>

            <!-- ServiceNow OAuth -->
            <section id="servicenow-oauth">
                <h3>ServiceNow OAuth Setup</h3>

                <ol>
                    <li>{lang === 'en' ? 'Navigate to' : 'Navigeer naar'} <strong>System OAuth → Application Registry</strong></li>
                    <li>{lang === 'en' ? 'Click' : 'Klik op'} <strong>New</strong> → Create an OAuth API endpoint</li>
                    <li>{lang === 'en' ? 'Configure:' : 'Configureer:'}
                        <ul>
                            <li><code>Name</code>: Snow-Flow</li>
                            <li><code>Redirect URL</code>: <code>http://localhost:3005/callback</code></li>
                            <li><code>Refresh Token Lifespan</code>: <code>0</code></li>
                        </ul>
                    </li>
                    <li>{lang === 'en' ? 'Copy the' : 'Kopieer de'} <strong>Client ID</strong> {lang === 'en' ? 'and' : 'en'} <strong>Client Secret</strong></li>
                </ol>

                <div class="callout warning">
                    <div class="callout-title">{lang === 'en' ? 'Security Note' : 'Beveiligingsnotitie'}</div>
                    <p>{lang === 'en'
                        ? 'Never commit OAuth credentials to version control.'
                        : 'Commit nooit OAuth credentials naar version control.'}</p>
                </div>
            </section>

            <!-- LLM Providers -->
            <section id="llm-providers">
                <h3>LLM Providers</h3>

                <p>{lang === 'en'
                    ? 'Snow-Flow supports '
                    : 'Snow-Flow ondersteunt '}<strong>75+ AI providers</strong> via <a href="https://models.dev" target="_blank">Models.dev</a>.</p>

                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Provider</th>
                                <th>Environment Variable</th>
                                <th>{lang === 'en' ? 'Notes' : 'Notities'}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Claude</strong></td>
                                <td><code>ANTHROPIC_API_KEY</code></td>
                                <td>{lang === 'en' ? 'Recommended' : 'Aanbevolen'}</td>
                            </tr>
                            <tr>
                                <td><strong>GPT-4</strong></td>
                                <td><code>OPENAI_API_KEY</code></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td><strong>DeepSeek</strong></td>
                                <td><code>DEEPSEEK_API_KEY</code></td>
                                <td></td>
                            </tr>
                            <tr>
                                <td><strong>Ollama</strong></td>
                                <td><code>OLLAMA_BASE_URL</code></td>
                                <td>100% {lang === 'en' ? 'Free, local' : 'Gratis, lokaal'}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <div class="section-divider"></div>

            <!-- CLI Commands -->
            <section id="cli-commands">
                <h2>CLI {lang === 'en' ? 'Commands' : 'Commando\'s'}</h2>

                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Command</th>
                                <th>{lang === 'en' ? 'Description' : 'Beschrijving'}</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><code>snow-flow init</code></td>
                                <td>{lang === 'en' ? 'Initialize project with config files' : 'Initialiseer project'}</td>
                            </tr>
                            <tr>
                                <td><code>snow-flow auth login</code></td>
                                <td>{lang === 'en' ? 'Authenticate with ServiceNow' : 'Authenticeer met ServiceNow'}</td>
                            </tr>
                            <tr>
                                <td><code>snow-flow auth status</code></td>
                                <td>{lang === 'en' ? 'Check authentication status' : 'Controleer status'}</td>
                            </tr>
                            <tr>
                                <td><code>snow-flow agent "task"</code></td>
                                <td>{lang === 'en' ? 'Execute task autonomously' : 'Voer taak autonoom uit'}</td>
                            </tr>
                            <tr>
                                <td><code>snow-flow monitor</code></td>
                                <td>{lang === 'en' ? 'Real-time monitoring' : 'Real-time monitoring'}</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- CLI Agent -->
            <section id="cli-agent">
                <h3>Agent Mode</h3>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">bash</span>
                        <button class="code-copy">Copy</button>
                    </div>
                    <div class="code-content">
<pre><span class="comment"># Create a widget</span>
snow-flow agent <span class="string">"Create a dashboard widget for incident metrics"</span>

<span class="comment"># Automate a process</span>
snow-flow agent <span class="string">"Create business rule to auto-assign incidents"</span>

<span class="comment"># Complex task with multiple agents</span>
snow-flow agent <span class="string">"Build a complete workspace for IT support"</span></pre>
                    </div>
                </div>

                <div class="callout success">
                    <div class="callout-title">{lang === 'en' ? 'Automatic Update Sets' : 'Automatische Update Sets'}</div>
                    <p>{lang === 'en'
                        ? 'Agent mode automatically creates isolated update sets for each task.'
                        : 'Agent mode maakt automatisch geïsoleerde update sets aan voor elke taak.'}</p>
                </div>
            </section>

            <div class="section-divider"></div>

            <!-- MCP Overview -->
            <section id="mcp-overview">
                <h2>MCP Tools {lang === 'en' ? 'Overview' : 'Overzicht'}</h2>

                <p>{lang === 'en'
                    ? 'Snow-Flow includes '
                    : 'Snow-Flow bevat '}<strong>410+ MCP tools</strong>{lang === 'en'
                    ? ' across 18 specialized servers.'
                    : ' verdeeld over 18 gespecialiseerde servers.'}</p>

                <div class="card-grid">
                    <div class="card">
                        <div class="card-title">Deployment Server</div>
                        <div class="card-desc">{lang === 'en' ? 'Widget & artifact deployment' : 'Widget & artifact deployment'}</div>
                    </div>
                    <div class="card">
                        <div class="card-title">Operations Server</div>
                        <div class="card-desc">{lang === 'en' ? 'Core ServiceNow operations' : 'Core ServiceNow operaties'}</div>
                    </div>
                    <div class="card">
                        <div class="card-title">Automation Server</div>
                        <div class="card-desc">{lang === 'en' ? 'Script execution' : 'Script executie'}</div>
                    </div>
                    <div class="card">
                        <div class="card-title">Platform Development</div>
                        <div class="card-desc">{lang === 'en' ? 'Business rules, scripts' : 'Business rules, scripts'}</div>
                    </div>
                </div>

                <a href={`/${lang}/mcp-reference`} class="btn btn-secondary" style="margin-top: 1rem; display: inline-block;">
                    {lang === 'en' ? 'View Complete MCP Reference' : 'Bekijk Complete MCP Referentie'} →
                </a>
            </section>

            <!-- MCP Tools -->
            <section id="mcp-tools">
                <h3>{lang === 'en' ? 'Tool Categories' : 'Tool Categorieën'}</h3>

                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Server</th>
                                <th>{lang === 'en' ? 'Purpose' : 'Doel'}</th>
                                <th>Tools</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Deployment</strong></td>
                                <td>{lang === 'en' ? 'Widget & artifact management' : 'Widget & artifact beheer'}</td>
                                <td>25+</td>
                            </tr>
                            <tr>
                                <td><strong>Operations</strong></td>
                                <td>{lang === 'en' ? 'CRUD, queries, CMDB' : 'CRUD, queries, CMDB'}</td>
                                <td>30+</td>
                            </tr>
                            <tr>
                                <td><strong>Automation</strong></td>
                                <td>{lang === 'en' ? 'Scripts, jobs, events' : 'Scripts, jobs, events'}</td>
                                <td>20+</td>
                            </tr>
                            <tr>
                                <td><strong>Platform Dev</strong></td>
                                <td>{lang === 'en' ? 'Business rules, scripts' : 'Business rules, scripts'}</td>
                                <td>35+</td>
                            </tr>
                            <tr>
                                <td><strong>Update Sets</strong></td>
                                <td>{lang === 'en' ? 'Change management' : 'Change management'}</td>
                                <td>15+</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <div class="section-divider"></div>

            <!-- ES5 JavaScript -->
            <section id="es5-javascript">
                <h2>ES5 JavaScript Best Practices</h2>

                <p>{lang === 'en'
                    ? 'ServiceNow runs on the Rhino engine (ES5). ES6+ may cause issues.'
                    : 'ServiceNow draait op de Rhino engine (ES5). ES6+ kan problemen veroorzaken.'}</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">javascript</span>
                    </div>
                    <div class="code-content">
<pre><span class="comment">// ✅ ES5 - Always works</span>
<span class="keyword">var</span> items = [];
<span class="keyword">for</span> (<span class="keyword">var</span> i = 0; i < data.length; i++) {
  items.push(data[i].name);
}

<span class="comment">// ⚠️ ES6 - May cause issues</span>
<span class="keyword">const</span> items = data.map(d => d.name);</pre>
                    </div>
                </div>

                <div class="callout warning">
                    <div class="callout-title">{lang === 'en' ? 'Quick Conversion' : 'Snelle Conversie'}</div>
                    <p><code>const/let</code> → <code>var</code> | <code>() =></code> → <code>function()</code> | <code>`${}`</code> → <code>''+</code></p>
                </div>
            </section>

            <!-- Update Sets -->
            <section id="update-sets">
                <h3>Update Sets</h3>

                <p>{lang === 'en'
                    ? 'All changes MUST be tracked in Update Sets for proper change management.'
                    : 'Alle wijzigingen MOETEN worden bijgehouden in Update Sets.'}</p>

                <div class="code-block">
                    <div class="code-header">
                        <span class="code-lang">javascript</span>
                    </div>
                    <div class="code-content">
<pre><span class="comment">// Create Update Set first</span>
snow_update_set_manage({
  action: <span class="string">'create'</span>,
  name: <span class="string">'Feature: My New Feature'</span>
});

<span class="comment">// Complete when done</span>
snow_update_set_manage({ action: <span class="string">'complete'</span> });</pre>
                    </div>
                </div>
            </section>

            <div class="section-divider"></div>

            <!-- Full Documentation Link -->
            <section class="docs-cta">
                <h2>{lang === 'en' ? 'Full Documentation' : 'Volledige Documentatie'}</h2>
                <p>{lang === 'en'
                    ? 'For the complete documentation with advanced topics, visit our dedicated docs site.'
                    : 'Voor de complete documentatie, bezoek onze speciale docs site.'}</p>
                <a href="https://docs.snow-flow.dev/" class="btn btn-primary" target="_blank">
                    {lang === 'en' ? 'Visit Full Documentation' : 'Bezoek Volledige Documentatie'} →
                </a>
            </section>
        </main>
    </div>

    <!-- Mobile Sidebar Toggle -->
    <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
    </button>

    <!-- Scroll to Top -->
    <button class="scroll-top" id="scrollTop" aria-label="Scroll to top">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="12" y1="19" x2="12" y2="5"></line>
            <polyline points="5 12 12 5 19 12"></polyline>
        </svg>
    </button>

    <!-- JSON-LD for Documentation -->
    <script type="application/ld+json" set:html={JSON.stringify({
        "@context": "https://schema.org",
        "@type": "TechArticle",
        "headline": title,
        "description": description,
        "author": { "@type": "Organization", "name": "Snow-Flow Team" },
        "publisher": { "@type": "Organization", "name": "Snow-Flow" }
    })} />
</BaseLayout>

<style>
    /* Docs Layout */
    .docs-layout {
        display: flex;
        min-height: 100vh;
        padding-top: 70px;
        position: relative;
        z-index: 1;
    }

    /* Sidebar */
    .sidebar {
        position: fixed;
        top: 70px;
        left: 0;
        width: 280px;
        height: calc(100vh - 70px);
        background: var(--bg-secondary);
        border-right: 1px solid var(--border-subtle);
        overflow-y: auto;
        padding: 2rem 0;
        transform: translateX(-100%);
        transition: transform 0.3s ease;
        z-index: 100;
    }

    .sidebar.active {
        transform: translateX(0);
    }

    @media (min-width: 1024px) {
        .sidebar {
            transform: translateX(0);
        }
    }

    .sidebar-section {
        padding: 0 1.5rem;
        margin-bottom: 2rem;
    }

    .sidebar-title {
        font-size: 0.7rem;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: var(--text-muted);
        margin-bottom: 0.75rem;
    }

    .sidebar-links {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .sidebar-links a {
        display: block;
        padding: 0.5rem 0.75rem;
        margin: 0.125rem 0;
        color: var(--text-secondary);
        text-decoration: none;
        font-size: 0.875rem;
        border-radius: 6px;
        transition: all 0.2s;
    }

    .sidebar-links a:hover {
        color: var(--text-primary);
        background: rgba(0, 217, 255, 0.1);
    }

    .sidebar-links a.active {
        color: var(--accent-cyan);
        background: rgba(0, 217, 255, 0.1);
    }

    .sidebar-backdrop {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.6);
        z-index: 99;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
    }

    .sidebar-backdrop.active {
        opacity: 1;
        visibility: visible;
    }

    @media (min-width: 1024px) {
        .sidebar-backdrop {
            display: none;
        }
    }

    /* Main Content */
    .docs-content {
        flex: 1;
        padding: 3rem 2rem;
        max-width: 900px;
        margin-left: 0;
        overflow-wrap: break-word;
    }

    @media (min-width: 1024px) {
        .docs-content {
            margin-left: 280px;
            padding: 3rem 4rem;
        }
    }

    /* Typography */
    .docs-content h1 {
        font-size: 2.5rem;
        font-weight: 800;
        letter-spacing: -0.02em;
        margin-bottom: 1rem;
        background: linear-gradient(135deg, var(--text-primary), var(--accent-cyan));
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .docs-content h2 {
        font-size: 1.75rem;
        font-weight: 700;
        margin: 3rem 0 1.5rem;
        padding-bottom: 0.75rem;
        border-bottom: 1px solid var(--border-subtle);
    }

    .docs-content h3 {
        font-size: 1.25rem;
        font-weight: 600;
        margin: 2rem 0 1rem;
        color: var(--accent-cyan);
    }

    .docs-content p {
        color: var(--text-secondary);
        margin-bottom: 1.25rem;
        line-height: 1.7;
    }

    .docs-content a {
        color: var(--accent-cyan);
        text-decoration: none;
    }

    .docs-content a:hover {
        text-decoration: underline;
    }

    .docs-content ul, .docs-content ol {
        margin: 1rem 0 1.5rem 1.5rem;
        color: var(--text-secondary);
    }

    .docs-content li {
        margin-bottom: 0.5rem;
    }

    .docs-content strong {
        color: var(--text-primary);
        font-weight: 600;
    }

    /* Intro Section */
    .docs-intro {
        padding-bottom: 2rem;
        margin-bottom: 2rem;
        border-bottom: 1px solid var(--border-subtle);
    }

    .docs-intro p {
        font-size: 1.125rem;
    }

    .version-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 1rem;
        background: rgba(0, 217, 255, 0.1);
        border: 1px solid rgba(0, 217, 255, 0.3);
        border-radius: 100px;
        font-size: 0.875rem;
        margin-bottom: 1.5rem;
    }

    .version-badge .v {
        color: var(--text-muted);
    }

    .version-badge .num {
        color: var(--accent-cyan);
        font-weight: 600;
        font-family: var(--font-mono);
    }

    /* Code Blocks */
    .code-block {
        background: var(--bg-code, #0f0f18);
        border: 1px solid var(--border-subtle);
        border-radius: 12px;
        margin: 1.5rem 0;
        overflow: hidden;
    }

    .code-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0.75rem 1rem;
        background: rgba(255, 255, 255, 0.02);
        border-bottom: 1px solid var(--border-subtle);
    }

    .code-lang {
        font-size: 0.75rem;
        font-weight: 600;
        color: var(--text-muted);
        text-transform: uppercase;
    }

    .code-copy {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--border-medium);
        color: var(--text-secondary);
        padding: 0.375rem 0.75rem;
        border-radius: 6px;
        font-size: 0.75rem;
        cursor: pointer;
        transition: all 0.2s;
    }

    .code-copy:hover {
        background: rgba(0, 217, 255, 0.1);
        border-color: var(--accent-cyan);
        color: var(--accent-cyan);
    }

    .code-content {
        padding: 1rem 1.25rem;
        overflow-x: auto;
    }

    .code-content pre {
        margin: 0;
        font-family: var(--font-mono);
        font-size: 0.875rem;
        line-height: 1.6;
        color: var(--text-secondary);
    }

    .code-content .comment { color: var(--text-muted); }
    .code-content .keyword { color: var(--accent-purple, #8B5CF6); }
    .code-content .string { color: var(--accent-green, #10B981); }

    /* Inline Code */
    .docs-content code {
        font-family: var(--font-mono);
        font-size: 0.875em;
        background: rgba(0, 217, 255, 0.1);
        color: var(--accent-cyan);
        padding: 0.2em 0.4em;
        border-radius: 4px;
    }

    /* Callouts */
    .callout {
        padding: 1.25rem 1.5rem;
        border-radius: 12px;
        margin: 1.5rem 0;
        border-left: 4px solid;
    }

    .callout-title {
        font-weight: 700;
        margin-bottom: 0.5rem;
    }

    .callout p {
        margin-bottom: 0;
    }

    .callout.info {
        background: rgba(59, 130, 246, 0.1);
        border-color: var(--accent-blue, #3B82F6);
    }

    .callout.info .callout-title {
        color: var(--accent-blue, #3B82F6);
    }

    .callout.warning {
        background: rgba(245, 158, 11, 0.1);
        border-color: var(--accent-yellow, #F59E0B);
    }

    .callout.warning .callout-title {
        color: var(--accent-yellow, #F59E0B);
    }

    .callout.success {
        background: rgba(16, 185, 129, 0.1);
        border-color: var(--accent-green, #10B981);
    }

    .callout.success .callout-title {
        color: var(--accent-green, #10B981);
    }

    /* Cards */
    .card-grid {
        display: grid;
        gap: 1rem;
        margin: 1.5rem 0;
    }

    @media (min-width: 640px) {
        .card-grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }

    .card {
        background: var(--bg-card);
        border: 1px solid var(--border-subtle);
        border-radius: 12px;
        padding: 1.5rem;
        transition: all 0.3s;
    }

    .card:hover {
        border-color: var(--accent-cyan);
        transform: translateY(-2px);
    }

    .card-title {
        font-weight: 700;
        margin-bottom: 0.5rem;
        color: var(--text-primary);
    }

    .card-desc {
        color: var(--text-muted);
        font-size: 0.875rem;
    }

    /* Tables */
    .table-wrapper {
        overflow-x: auto;
        margin: 1.5rem 0;
    }

    table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.9rem;
    }

    th, td {
        padding: 0.875rem 1rem;
        text-align: left;
        border-bottom: 1px solid var(--border-subtle);
    }

    th {
        background: var(--bg-card);
        font-weight: 600;
        color: var(--text-primary);
    }

    td {
        color: var(--text-secondary);
    }

    /* Section Divider */
    .section-divider {
        height: 1px;
        background: linear-gradient(90deg, transparent, var(--border-medium), transparent);
        margin: 4rem 0;
    }

    /* Buttons */
    .btn {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1.5rem;
        border-radius: 8px;
        font-weight: 600;
        text-decoration: none;
        transition: all 0.3s;
    }

    .btn-primary {
        background: var(--accent-cyan);
        color: var(--bg-primary);
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 20px rgba(0, 217, 255, 0.3);
        text-decoration: none;
    }

    .btn-secondary {
        background: transparent;
        border: 1px solid var(--border-medium);
        color: var(--text-primary);
    }

    .btn-secondary:hover {
        border-color: var(--accent-cyan);
        color: var(--accent-cyan);
        text-decoration: none;
    }

    /* Docs CTA */
    .docs-cta {
        text-align: center;
        padding: 3rem;
        background: var(--bg-card);
        border-radius: 16px;
        border: 1px solid var(--border-subtle);
    }

    .docs-cta h2 {
        border-bottom: none;
        margin-top: 0;
    }

    /* Sidebar Toggle */
    .sidebar-toggle {
        position: fixed;
        bottom: 2rem;
        left: 1rem;
        width: 52px;
        height: 52px;
        background: var(--accent-cyan);
        border: none;
        color: var(--bg-primary);
        border-radius: 14px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 100;
        box-shadow: 0 4px 20px rgba(0, 217, 255, 0.3);
        transition: all 0.3s ease;
    }

    .sidebar-toggle:hover {
        transform: translateY(-2px);
    }

    @media (min-width: 1024px) {
        .sidebar-toggle {
            display: none;
        }
    }

    /* Scroll to Top */
    .scroll-top {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        width: 48px;
        height: 48px;
        background: var(--accent-cyan);
        color: var(--bg-primary);
        border: none;
        border-radius: 12px;
        cursor: pointer;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s;
        z-index: 100;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .scroll-top.visible {
        opacity: 1;
        visibility: visible;
    }

    .scroll-top:hover {
        transform: translateY(-4px);
    }

    /* Mobile */
    @media (max-width: 480px) {
        .docs-content {
            padding: 1.5rem 1rem;
        }

        .docs-content h1 {
            font-size: 1.75rem;
        }

        .docs-content h2 {
            font-size: 1.35rem;
        }

        .code-block {
            margin: 1rem -1rem;
            border-radius: 0;
            border-left: none;
            border-right: none;
        }
    }
</style>

<script>
    // Sidebar toggle
    const sidebar = document.getElementById('sidebar');
    const sidebarBackdrop = document.getElementById('sidebarBackdrop');
    const sidebarToggle = document.getElementById('sidebarToggle');

    function toggleSidebar() {
        sidebar?.classList.toggle('active');
        sidebarBackdrop?.classList.toggle('active');
    }

    sidebarToggle?.addEventListener('click', toggleSidebar);
    sidebarBackdrop?.addEventListener('click', toggleSidebar);

    // Close sidebar on link click (mobile)
    sidebar?.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
            if (window.innerWidth < 1024) {
                toggleSidebar();
            }
        });
    });

    // Scroll to top
    const scrollTopBtn = document.getElementById('scrollTop');

    window.addEventListener('scroll', () => {
        if (window.scrollY > 300) {
            scrollTopBtn?.classList.add('visible');
        } else {
            scrollTopBtn?.classList.remove('visible');
        }
    });

    scrollTopBtn?.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    });

    // Active sidebar link
    const sections = document.querySelectorAll('section[id]');
    const sidebarLinks = document.querySelectorAll('.sidebar-links a[href^="#"]');

    function setActiveLink() {
        const scrollY = window.pageYOffset;

        sections.forEach(section => {
            const sectionHeight = section.offsetHeight;
            const sectionTop = section.offsetTop - 150;
            const sectionId = section.getAttribute('id');

            if (scrollY >= sectionTop && scrollY < sectionTop + sectionHeight) {
                sidebarLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href') === '#' + sectionId) {
                        link.classList.add('active');
                    }
                });
            }
        });
    }

    window.addEventListener('scroll', setActiveLink);
    setActiveLink();

    // Copy code
    document.querySelectorAll('.code-copy').forEach(button => {
        button.addEventListener('click', async () => {
            const code = button.closest('.code-block')?.querySelector('pre')?.textContent || '';
            try {
                await navigator.clipboard.writeText(code);
                button.textContent = 'Copied!';
                setTimeout(() => button.textContent = 'Copy', 2000);
            } catch (err) {
                console.error('Failed to copy:', err);
            }
        });
    });

    // Fetch npm version
    async function fetchVersion() {
        try {
            const response = await fetch('https://registry.npmjs.org/snow-flow/latest');
            const data = await response.json();
            const versionEl = document.getElementById('npm-version');
            if (versionEl && data.version) {
                versionEl.textContent = data.version;
            }
        } catch (e) {
            const versionEl = document.getElementById('npm-version');
            if (versionEl) versionEl.textContent = '1.0.0';
        }
    }

    fetchVersion();
</script>
