<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snow-Flow - Complete API Documentation</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/api-docs.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <span class="logo">üèîÔ∏è</span>
                <span class="brand-name">Snow-Flow API</span>
            </div>
            <ul class="nav-menu">
                <li><a href="../index.html" class="nav-link">Home</a></li>
                <li><a href="#cli" class="nav-link">CLI</a></li>
                <li><a href="#javascript" class="nav-link">JavaScript</a></li>
                <li><a href="#mcp" class="nav-link">MCP</a></li>
                <li><a href="https://github.com/groeimetai/snow-flow" class="nav-link github">GitHub</a></li>
            </ul>
        </div>
    </nav>

    <!-- API Documentation -->
    <section class="api-docs">
        <div class="container">
            <h1>Complete API Documentation</h1>
            
            <!-- CLI Commands -->
            <div id="cli" class="api-section">
                <h2>CLI Commands</h2>
                
                <div class="api-method">
                    <h3>snow-flow init</h3>
                    <p>Initialize a new Snow-Flow project in the current directory.</p>
                    <pre><code class="language-bash">snow-flow init [options]

Options:
  --sparc         Initialize with full SPARC development environment
  --minimal       Create minimal configuration
  --force         Overwrite existing configuration</code></pre>
                </div>

                <div class="api-method">
                    <h3>snow-flow auth</h3>
                    <p>Manage ServiceNow authentication.</p>
                    <pre><code class="language-bash">snow-flow auth login    # OAuth authentication flow
snow-flow auth logout   # Remove stored credentials
snow-flow auth status   # Check authentication status
snow-flow auth refresh  # Refresh OAuth token</code></pre>
                </div>

                <div class="api-method">
                    <h3>snow-flow swarm</h3>
                    <p>Execute multi-agent swarm coordination for complex tasks.</p>
                    <pre><code class="language-bash">snow-flow swarm "task description" [options]

Options:
  --strategy [type]      Strategy: research|development|analysis|testing|optimization|maintenance
  --mode [type]          Mode: centralized|distributed|hierarchical|mesh|hybrid
  --max-agents [n]       Maximum number of agents (default: 5)
  --parallel            Enable parallel execution
  --monitor             Real-time monitoring
  --output [format]      Output format: json|sqlite|csv|html
  --smart-discovery     Enable smart artifact discovery (default: true)
  --live-testing        Enable live testing (default: true)
  --auto-deploy         Automatic deployment (default: true)
  --auto-rollback       Automatic rollback on failure (default: true)</code></pre>
                </div>

                <div class="api-method">
                    <h3>snow-flow sparc</h3>
                    <p>Run SPARC development modes.</p>
                    <pre><code class="language-bash">snow-flow sparc "task"                    # Orchestrator mode (default)
snow-flow sparc run [mode] "task"         # Run specific mode
snow-flow sparc tdd "feature"             # Test-driven development
snow-flow sparc modes                     # List all available modes

Available modes:
- orchestrator    - Multi-agent coordination
- coder          - Code generation
- researcher     - Research and analysis
- tdd            - Test-driven development
- architect      - System architecture
- reviewer       - Code review
- debugger       - Debug and fix
- tester         - Testing
- analyzer       - Code analysis
- optimizer      - Performance optimization
- documenter     - Documentation
- designer       - UI/UX design
- innovator      - Innovation and ideation</code></pre>
                </div>

                <div class="api-method">
                    <h3>snow-flow memory</h3>
                    <p>Persistent memory management across sessions.</p>
                    <pre><code class="language-bash">snow-flow memory store [key] [data]      # Store data
snow-flow memory get [key]               # Retrieve data
snow-flow memory list                    # List all keys
snow-flow memory delete [key]            # Delete entry
snow-flow memory export [file]           # Export to file
snow-flow memory import [file]           # Import from file
snow-flow memory stats                   # Memory statistics
snow-flow memory cleanup                 # Clean unused entries</code></pre>
                </div>
            </div>

            <!-- JavaScript API -->
            <div id="javascript" class="api-section">
                <h2>JavaScript API</h2>
                
                <div class="api-method">
                    <h3>snow_deploy_widget(options)</h3>
                    <p>Deploy a Service Portal widget with automatic coherence validation.</p>
                    <pre><code class="language-javascript">const result = await snow_deploy_widget({
    name: "My Widget",
    id: "my_widget",
    template: "&lt;div&gt;HTML template&lt;/div&gt;",
    css: ".my-class { color: blue; }",
    server_script: "(function() { data.items = []; })()",
    client_script: "function($scope) { var c = this; }",
    option_schema: [
        {
            name: "title",
            label: "Title",
            type: "string"
        }
    ],
    demo_data: {},
    dependencies: [],
    update_set: "auto" // or specific sys_id
});

// Returns:
{
    success: true,
    sys_id: "widget_sys_id",
    portal_url: "https://instance.service-now.com/sp?id=widget_editor&sys_id=...",
    api_endpoint: "/api/now/sp/widget/...",
    validation: {
        coherence: true,
        es5_compliant: true,
        data_flow: "valid"
    }
}</code></pre>
                </div>

                <div class="api-method">
                    <h3>snow_execute_script_with_output(options)</h3>
                    <p>Execute background script and capture all output.</p>
                    <pre><code class="language-javascript">const result = await snow_execute_script_with_output({
    script: `
        gs.info('Starting process...');
        var gr = new GlideRecord('incident');
        gr.query();
        gs.print('Found ' + gr.getRowCount() + ' records');
        return { count: gr.getRowCount() };
    `,
    scope: "global", // or specific app scope
    timeout: 30000
});

// Returns:
{
    success: true,
    executionId: "snow_flow_exec_123456",
    output: [
        "[INFO] Starting process...",
        "Found 42 records"
    ],
    returnValue: { count: 42 },
    executionTime: 1234,
    errors: []
}</code></pre>
                </div>

                <div class="api-method">
                    <h3>snow_query_table(options)</h3>
                    <p>Query any ServiceNow table with advanced options.</p>
                    <pre><code class="language-javascript">const result = await snow_query_table({
    table: "incident",
    query: "active=true^priority=1",
    fields: ["number", "short_description", "assigned_to"],
    limit: 100,
    offset: 0,
    orderBy: "sys_created_on",
    orderByDesc: true,
    sysparm_display_value: true
});

// Returns:
{
    success: true,
    data: {
        result: [
            {
                number: "INC0001234",
                short_description: "Cannot access email",
                assigned_to: "John Doe"
            }
        ]
    },
    count: 42,
    hasMore: true
}</code></pre>
                </div>

                <div class="api-method">
                    <h3>snow_create_flow(options)</h3>
                    <p>Create and deploy Flow Designer flows.</p>
                    <pre><code class="language-javascript">const flow = await snow_create_flow({
    instruction: "Create incident escalation flow with SLA monitoring",
    name: "Incident Escalation",
    description: "Automatically escalate high priority incidents",
    triggers: [
        {
            type: "record_created",
            table: "incident",
            condition: "priority=1"
        }
    ],
    deploy_immediately: true,
    return_metadata: true
});

// Returns:
{
    success: true,
    flow_sys_id: "flow_123456",
    flow_url: "https://instance.service-now.com/$flow-designer.do",
    actions_created: 5,
    triggers_created: 1,
    test_url: "https://instance.service-now.com/flow_test"
}</code></pre>
                </div>

                <div class="api-method">
                    <h3>snow_train_classifier(options)</h3>
                    <p>Train machine learning models for classification.</p>
                    <pre><code class="language-javascript">const model = await snow_train_classifier({
    type: "incident_category",
    training_data: {
        table: "incident",
        fields: ["short_description", "description"],
        label: "category",
        query: "sys_created_on>javascript:gs.daysAgo(30)",
        limit: 1000,
        balance_dataset: true
    },
    model_config: {
        type: "lstm",
        embedding_dim: 128,
        lstm_units: 64,
        dropout: 0.2,
        epochs: 50,
        batch_size: 32,
        validation_split: 0.2
    },
    save_model: true
});

// Returns:
{
    success: true,
    model_id: "model_123456",
    accuracy: 0.92,
    loss: 0.23,
    training_time: 45000,
    categories: ["Hardware", "Software", "Network", "Access"],
    confusion_matrix: [[...]],
    model_path: "/models/incident_category_lstm.json"
}</code></pre>
                </div>

                <div class="api-method">
                    <h3>snow_property_manager(options)</h3>
                    <p>Manage system properties with full CRUD operations.</p>
                    <pre><code class="language-javascript">// Get property
const value = await snow_property_manager({
    action: "get",
    name: "glide.ui.polaris.enabled"
});

// Set property
await snow_property_manager({
    action: "set",
    name: "my.custom.property",
    value: "production",
    type: "string",
    description: "Environment setting"
});

// List properties
const props = await snow_property_manager({
    action: "list",
    pattern: "glide.ui.*",
    limit: 50
});

// Bulk update
await snow_property_manager({
    action: "bulk_update",
    properties: [
        { name: "prop1", value: "val1" },
        { name: "prop2", value: "val2" }
    ]
});</code></pre>
                </div>
            </div>

            <!-- MCP Servers -->
            <div id="mcp" class="api-section">
                <h2>MCP Server Tools</h2>
                
                <div class="api-method">
                    <h3>ServiceNow Deployment MCP</h3>
                    <p>Tools for deploying artifacts to ServiceNow.</p>
                    <ul class="tool-list">
                        <li><code>snow_deploy_widget</code> - Deploy Service Portal widgets</li>
                        <li><code>snow_deploy_portal_page</code> - Deploy portal pages</li>
                        <li><code>snow_deploy_flow</code> - Deploy Flow Designer flows</li>
                        <li><code>snow_deploy_application</code> - Deploy scoped applications</li>
                        <li><code>snow_create_update_set</code> - Create update sets</li>
                        <li><code>snow_validate_deployment</code> - Validate deployments</li>
                        <li><code>snow_rollback_deployment</code> - Rollback on failure</li>
                        <li><code>snow_deploy_ui_page</code> - Deploy UI pages</li>
                        <li><code>snow_deploy_script_include</code> - Deploy Script Includes</li>
                        <li><code>snow_deploy_business_rule</code> - Deploy Business Rules</li>
                    </ul>
                </div>

                <div class="api-method">
                    <h3>ServiceNow Operations MCP</h3>
                    <p>Core CRUD operations and data management.</p>
                    <ul class="tool-list">
                        <li><code>snow_query_table</code> - Query any table</li>
                        <li><code>snow_create_record</code> - Create records</li>
                        <li><code>snow_update_record</code> - Update records</li>
                        <li><code>snow_delete_record</code> - Delete records</li>
                        <li><code>snow_get_by_sysid</code> - Get record by sys_id</li>
                        <li><code>snow_discover_table_fields</code> - Discover schema</li>
                        <li><code>snow_get_table_relationships</code> - Get relationships</li>
                        <li><code>snow_batch_api</code> - Batch operations</li>
                        <li><code>snow_cmdb_search</code> - Search CMDB</li>
                        <li><code>snow_aggregate_query</code> - Aggregate queries</li>
                    </ul>
                </div>

                <div class="api-method">
                    <h3>ServiceNow Automation MCP</h3>
                    <p>Script execution and automation tools.</p>
                    <ul class="tool-list">
                        <li><code>snow_execute_script_with_output</code> - Execute with output capture</li>
                        <li><code>snow_get_script_output</code> - Get execution history</li>
                        <li><code>snow_execute_script_sync</code> - Synchronous execution</li>
                        <li><code>snow_get_logs</code> - Access system logs</li>
                        <li><code>snow_test_rest_connection</code> - Test REST endpoints</li>
                        <li><code>snow_rest_message_test_suite</code> - Test REST messages</li>
                        <li><code>snow_trace_execution</code> - Trace script execution</li>
                        <li><code>snow_schedule_job</code> - Schedule jobs</li>
                        <li><code>snow_create_event</code> - Create events</li>
                        <li><code>snow_run_workflow</code> - Execute workflows</li>
                    </ul>
                </div>

                <div class="api-method">
                    <h3>ServiceNow Machine Learning MCP</h3>
                    <p>AI/ML capabilities and predictive analytics.</p>
                    <ul class="tool-list">
                        <li><code>snow_train_classifier</code> - Train classifiers</li>
                        <li><code>snow_predict</code> - Make predictions</li>
                        <li><code>snow_detect_anomalies</code> - Anomaly detection</li>
                        <li><code>snow_forecast_incidents</code> - Incident forecasting</li>
                        <li><code>snow_sentiment_analysis</code> - Analyze sentiment</li>
                        <li><code>snow_text_classification</code> - Classify text</li>
                        <li><code>snow_predict_change_risk</code> - Risk prediction</li>
                        <li><code>snow_optimize_process</code> - Process optimization</li>
                        <li><code>snow_cluster_analysis</code> - Data clustering</li>
                        <li><code>snow_time_series_forecast</code> - Time series analysis</li>
                    </ul>
                </div>
            </div>

            <!-- Error Codes -->
            <div class="api-section">
                <h2>Error Codes</h2>
                <table class="error-table">
                    <thead>
                        <tr>
                            <th>Code</th>
                            <th>Description</th>
                            <th>Resolution</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>AUTH_001</td>
                            <td>Authentication failed</td>
                            <td>Run <code>snow-flow auth login</code></td>
                        </tr>
                        <tr>
                            <td>AUTH_002</td>
                            <td>Token expired</td>
                            <td>Run <code>snow-flow auth refresh</code></td>
                        </tr>
                        <tr>
                            <td>MCP_001</td>
                            <td>MCP server not running</td>
                            <td>Run <code>snow-flow mcp start</code></td>
                        </tr>
                        <tr>
                            <td>DEPLOY_001</td>
                            <td>Deployment validation failed</td>
                            <td>Check widget coherence and ES5 compliance</td>
                        </tr>
                        <tr>
                            <td>SCRIPT_001</td>
                            <td>Script execution timeout</td>
                            <td>Increase timeout or optimize script</td>
                        </tr>
                        <tr>
                            <td>ML_001</td>
                            <td>Insufficient training data</td>
                            <td>Provide at least 100 samples per category</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </section>

    <script src="../js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
</body>
</html>